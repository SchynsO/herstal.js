"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(){function e(e,t){t=t||{},this.worldRender=null,this.character=e,this.character.characterModel=this,this.geometry=null,this.material=null,this.mesh=new THREE.Mesh(this.geometry,this.material)}function t(e){this.player=e,this.waitInput=!1,document.addEventListener("mousedown",this.eventHandler,!1),document.addEventListener("keydown",this.eventHandler,!1),document.addEventListener("wheel",this.eventHandler,!1),document.addEventListener("contextmenu",function(e){e.preventDefault()},!1)}function r(e){this.socket=io.connect(e)}function n(e,t,r,n,o){var a=document.body.getElementById(e);if(!a)throw new Error("the given id doesn't match any div of the document");this.renderer=new THREE.WebGLRenderer,this.renderer.setSize(t,r),a.appendChild(this.renderer.domElement),this.worldRender=n,this.armsRender=o}function o(e,t){this.world=e,this.camera=t,this.scene=new THREE.Scene,this.characterModels=[]}var a={};if(!window||!document)throw new Error("This librairy is meant to be used in a web browser");if(window.HERSTALclient=a,!io)throw new Error("Herstal.client needs Socket.io to work");if(!HERSTALprefs)throw new Error("Herstal.client needs Herstal.preferences to work");if(!HERSTALshared)throw new Error("Herstal.client needs Herstal.shared to work");e.prototype.constructor=a.CharacterModel=e,e.prototype.animate=function(e){},t.prototype.constructor=a.CurrentPlayer=t,t.prototype.eventHandler=function(e){if(this.waitInput&&this.player.character){e=e||window.event;var r=null,n=!1;if(e.wheelDelta||e.deltaY){var o=Math.max(-1,Math.min(1,e.wheelDelta||-e.deltaY));o&&(r=o>0?-1:-2,n=!0)}else null!=e.button?(r=e.button,n=!0):(e.which||e.keyCode)&&(r="number"==typeof e.which?e.which:e.keyCode);if(null!=r){var a=n?t.INPUTS.mouse[r]:t.INPUTS.keyboard[r],s=this.player.character.inputs={};if(s.movement={x:0,y:0},s.weapon=null,"weap"==a.substr(0,4))s.weapon=a.substr(4,1);else switch(a){case"moveF":++s.movement.y;break;case"moveB":--s.movement.y;break;case"moveL":--s.movement.x;break;case"moveR":++s.movement.x;break;case"prevWeap":s.weapon=-1;break;case"nextWeap":s.weapon=-2;break;default:s[a]=!0}}}},t.INPUTS={mouse:{},keyboard:{}};for(var s in CooMan.options){var i=CooMan.options[s];"object"===("undefined"==typeof i?"undefined":_typeof(i))&&null!=i.btn&&(i.isMouse?t.INPUTS.mouse[i.btn]=s:t.INPUTS.keyboard[i.btn]=s)}r.prototype.constructor=a.Client=r,n.prototype.constructor=a.Canvas=n,n.prototype.renderUpdate=function(){this.worldRender&&this.worldRender.scene&&this.worldRender.camera&&this.renderer.render(this.worldRender.scene,this.worldRender.camera),this.armsRender&&this.armsRender.scene&&this.armsRender.camera&&this.renderer.render(this.armsRender.scene,this.armsRender.camera)},o.prototype.constructor=a.WorldRender=o,o.prototype.addCharacterModel=function(e){this.characterModels.addElement(e),e.worldRender=this,this.scene.add(e.mesh)},o.prototype.removeCharacterModel=function(e){var t=this.characterModels.removeElement(e);t>-1&&(e.worldRender=null,this.scene.remove(e.mesh))}}();
//# sourceMappingURL=herstal.client.min.js.map
